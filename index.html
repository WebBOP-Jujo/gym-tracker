<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym Tracker</title>
    <link rel="stylesheet" href="style.css">
    <!-- Enlace a Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <!-- Área para Notificaciones Toast -->
    <div id="notification-area" class="notification-container"></div>

    <!-- Contenedor Principal -->
    <div class="container">

        <h1>Registro de Entrenamiento</h1>

        <form id="workout-form">
            <div class="form-group">
                <label for="exercise">Ejercicio:</label>
                <select id="exercise" name="exercise" required>
                    <option value="" disabled selected>-- Selecciona un ejercicio --</option>
                    <!-- Opciones pobladas por JS -->
                </select>
            </div>
            <div class="form-group">
                <label for="sets">Número de Series:</label>
                <input type="number" id="sets" name="sets" min="0" placeholder="Nº Series (o añade abajo)">
            </div>
            <div id="sets-inputs"></div>
            <button type="submit"><i class="fas fa-save"></i> Guardar Entrenamiento</button>
        </form>

        <!-- Botón para Gestionar Ejercicios -->
        <div class="manage-toggle-container">
             <button id="toggle-manage-btn">
                 <i class="fas fa-list-ul"></i> Gestionar Lista de Ejercicios
             </button>
        </div>

        <!-- Sección Gestión Ejercicios (Oculta por defecto) -->
        <div id="exercise-management-section" style="display: none;">
            <h2>Gestionar Lista de Ejercicios</h2>

            <!-- Área para Añadir Ejercicios -->
            <div class="exercise-add-area">
                <h3>Añadir Nuevo Ejercicio</h3>
                <div class="form-group">
                    <label for="new-exercise-name">Nombre del Nuevo Ejercicio:</label>
                    <input type="text" id="new-exercise-name" placeholder="Ej: Sentadilla Frontal">
                </div>
                <button id="add-exercise-btn">
                    <i class="fas fa-plus"></i> Añadir a la Lista
                </button>
                <span id="add-exercise-spinner" style="display: none; margin-left: 10px;">
                    <i class="fas fa-spinner fa-spin"></i> Guardando...
                </span>
            </div>

            <!-- Área para Eliminar Ejercicios (MODIFICADO) -->
            <div class="exercise-delete-area">
                 <h3>Eliminar Ejercicio Existente</h3>
                 <div class="form-group">
                    <label for="delete-exercise-select">Selecciona Ejercicio a Eliminar:</label>
                    <select id="delete-exercise-select">
                        <option value="" disabled selected>-- Selecciona ejercicio a eliminar --</option>
                        <!-- Opciones pobladas por JS -->
                    </select>
                 </div>
                 <button id="delete-exercise-btn" disabled>
                    <i class="fas fa-trash-alt"></i> Eliminar Seleccionado
                 </button>
                 <!-- Indicador de carga para eliminar -->
                 <span id="delete-exercise-spinner" style="display: none; margin-left: 10px;">
                    <i class="fas fa-spinner fa-spin"></i> Eliminando...
                 </span>
            </div>

        </div> <!-- Fin exercise-management-section -->

        <!-- Sección Progreso (Gráfica) -->
        <div id="progress-section">
            <h2>Visualización de Progreso</h2>
            <div id="graph-controls">
                <label for="graph-exercise-select">Ver progresión para:</label>
                <select id="graph-exercise-select" name="graph-exercise">
                    <option value="" disabled selected>-- Selecciona ejercicio --</option>
                    <!-- Opciones pobladas por JS -->
                </select>
                <button id="show-graph-btn" disabled><i class="fas fa-chart-line"></i> Mostrar Gráfica</button>
                <button id="hide-graph-btn" style="display: none;"><i class="fas fa-eye-slash"></i> Ocultar Gráfica</button>
            </div>
            <div id="graph-container" style="margin-top: 20px; display: none;">
                <canvas id="progress-chart"></canvas>
            </div>
        </div>

        <!-- Sección Filtro Historial -->
        <div id="history-filter">
             <label for="filter-date">Ver fecha específica:</label>
             <input type="date" id="filter-date" name="filter-date">
             <button id="clear-filter-btn" title="Mostrar los últimos entrenamientos registrados">Mostrar Recientes</button>
        </div>

        <!-- Historial -->
        <h2>Historial de Entrenamientos</h2>
        <div id="history-log">
            <div id="history-spinner" class="spinner-container" style="display: none;">
                <i class="fas fa-spinner fa-spin fa-3x"></i>
                <p>Procesando...</p>
            </div>
            <p>Aún no hay registros.</p>
        </div>

    </div> <!-- FIN Contenedor Principal -->

    <script src="script.js"></script>
</body>
</html>